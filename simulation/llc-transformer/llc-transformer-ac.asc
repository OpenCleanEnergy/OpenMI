Version 4
SHEET 1 3940 1956
WIRE -352 48 -464 48
WIRE 432 48 336 48
WIRE 560 48 496 48
WIRE 720 48 640 48
WIRE 832 48 720 48
WIRE 864 48 832 48
WIRE -464 64 -464 48
WIRE 720 64 720 48
WIRE 864 64 864 48
WIRE 720 160 720 144
WIRE 720 160 464 160
WIRE 864 160 864 144
WIRE 864 160 720 160
WIRE -464 176 -464 144
WIRE 464 192 464 160
WIRE 432 592 336 592
WIRE 736 592 496 592
WIRE 784 592 736 592
WIRE 1120 592 1008 592
WIRE 1488 592 1120 592
WIRE 1536 592 1488 592
WIRE 784 608 784 592
WIRE 1008 608 1008 592
WIRE 1536 608 1536 592
WIRE 624 704 464 704
WIRE 640 704 624 704
WIRE 784 704 784 688
WIRE 784 704 720 704
WIRE 1008 704 1008 688
WIRE 1136 704 1008 704
WIRE 1232 704 1216 704
WIRE 1536 704 1536 688
WIRE 1536 704 1232 704
WIRE 464 720 464 704
WIRE 1536 720 1536 704
WIRE 736 848 736 592
WIRE 784 848 736 848
WIRE 1120 848 1120 592
WIRE 1120 848 1008 848
WIRE 784 864 784 848
WIRE 1008 864 1008 848
WIRE 624 960 624 704
WIRE 640 960 624 960
WIRE 784 960 784 944
WIRE 784 960 720 960
WIRE 1008 960 1008 944
WIRE 1136 960 1008 960
WIRE 1232 960 1232 704
WIRE 1232 960 1216 960
WIRE 432 1072 336 1072
WIRE 784 1072 496 1072
WIRE 1488 1072 1008 1072
WIRE 1536 1072 1488 1072
WIRE 784 1088 784 1072
WIRE 1008 1088 1008 1072
WIRE 1536 1088 1536 1072
WIRE 640 1184 464 1184
WIRE 784 1184 784 1168
WIRE 784 1184 720 1184
WIRE 1008 1184 1008 1168
WIRE 1136 1184 1008 1184
WIRE 1536 1184 1536 1168
WIRE 1536 1184 1216 1184
WIRE 464 1200 464 1184
WIRE 1536 1200 1536 1184
FLAG -464 176 0
FLAG -352 48 V_in
FLAG 336 48 V_in
FLAG 464 192 0
FLAG 832 48 V_r
FLAG 1536 800 0
FLAG 464 720 0
FLAG 336 592 V_in
FLAG 1488 592 V_0
FLAG 1536 1280 0
FLAG 464 1200 0
FLAG 336 1072 V_in
FLAG 1488 1072 V_0_2
SYMBOL voltage -464 48 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1 0
SYMATTR InstName V1
SYMATTR Value ""
SYMBOL ind 704 48 R0
SYMATTR InstName Lm1
SYMATTR Value {L_m}
SYMBOL cap 496 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cr1
SYMATTR Value {C_r}
SYMBOL ind 544 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lr1
SYMATTR Value {L_r}
SYMBOL res 848 48 R0
SYMATTR InstName Rac
SYMATTR Value {R_ac}
SYMBOL ind2 768 592 R0
SYMATTR InstName Ls1
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL ind2 1024 592 M0
SYMATTR InstName Lp1
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL res 1520 704 R0
SYMATTR InstName Rg1
SYMATTR Value 20Meg
SYMBOL res 1520 592 R0
SYMATTR InstName R1
SYMATTR Value {R_0}
SYMBOL res 736 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rser1
SYMATTR Value 1µ
SYMBOL ind2 768 848 R0
SYMATTR InstName Ls2
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL ind2 1024 848 M0
SYMATTR InstName Lp2
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL res 736 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rser2
SYMATTR Value 1µ
SYMBOL res 1232 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rser3
SYMATTR Value 1µ
SYMBOL res 1232 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rser4
SYMATTR Value 1µ
SYMBOL cap 496 576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cr2
SYMATTR Value {C_r}
SYMBOL ind2 768 1072 R0
SYMATTR InstName Ls3
SYMATTR Value {Ls/2}
SYMATTR Type ind
SYMBOL ind2 1024 1072 M0
SYMATTR InstName Lp3
SYMATTR Value {Lp/2}
SYMATTR Type ind
SYMBOL res 1520 1184 R0
SYMATTR InstName Rg2
SYMATTR Value 20Meg
SYMBOL res 1520 1072 R0
SYMATTR InstName R2
SYMATTR Value {R_0}
SYMBOL res 736 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rser5
SYMATTR Value 1µ
SYMBOL res 1232 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rser7
SYMATTR Value 1µ
SYMBOL cap 496 1056 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cr3
SYMATTR Value {C_r}
TEXT -496 296 Left 2 !.ac lin 250 75k 500k
TEXT 744 -128 Left 2 !.param N = 35 / 2\n.param Lp = 500uH\n.param Llkg = 95uH\n.param Kf = sqrt(1 - (Llkg / Lp))\n.param Ls=Lp / (N**2)
TEXT 744 -216 Left 2 ;https://www.analog.com/en/technical-articles/using-transformers-in-ltspice-switcher-cadiii.html
TEXT -464 -320 Left 2 ;Datasheet:\nhttps://www.we-online.com/components/products/datasheet/760895631.pdf
TEXT -504 568 Left 2 !.param L_r = Llkg / (N**2) / 2\n.meas L_r_ PARAM L_r\n \n.param L_m = (Lp - Llkg) / (N**2) / 2\n.meas L_m_ PARAM L_m\n \n.param U_bus_nom = 425V\n.meas U_bus_nom_ PARAM U_bus_nom\n \n.param P_out_max = 400W\n.meas P_out_max_ PARAM P_out_max\n \n.param R_0 = U_bus_nom**2 / P_out_max\n.meas R_0_ PARAM R_0\n \n.param R_ac = (8 / PI**2) / N**2 * R_0\n.meas R_ac_ PARAM R_ac\n \n.param C_r = 1 / (2 * PI* f_r)**2 / L_r\n.meas C_r_ PARAM C_r
TEXT -464 -160 Left 2 !.param V_in = 40V\n.param f_r = 225kHz\n.param T_r = 1 / f_r \n.param t_edge = 10n\n.param t_onoff = T_r / 2 - t_edge\n.meas t_onoff_ PARAM T_onoff
TEXT -448 -200 Left 2 ;PULSE(0 {V_in} {t_onoff} {t_edge} {t_edge} {t_onoff} {T_r})
TEXT 808 584 Left 2 !K1 Lp1 Ls1 {Kf}
TEXT 808 840 Left 2 !K2 Lp2 Ls2 {Kf}
TEXT 1544 456 Left 2 ;L[dB] = 20 * log(V_out / V_in)\nV = 10**(L/20)\nExpected: \nL = 20 * log(35/2) = 24.86dB
TEXT 808 1064 Left 2 !K3 Lp3 Ls3 {Kf}
