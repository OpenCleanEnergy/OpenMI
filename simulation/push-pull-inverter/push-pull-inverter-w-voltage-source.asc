Version 4
SHEET 1 2092 680
WIRE -16 -864 -64 -864
WIRE -64 -832 -64 -864
WIRE -64 -720 -64 -752
WIRE -16 -672 -64 -672
WIRE -64 -640 -64 -672
WIRE -64 -528 -64 -560
WIRE 960 -400 448 -400
WIRE 1248 -400 1120 -400
WIRE 1376 -400 1312 -400
WIRE 1472 -400 1376 -400
WIRE 1664 -400 1552 -400
WIRE -16 -368 -64 -368
WIRE 1664 -352 1664 -400
WIRE -64 -336 -64 -368
WIRE 960 -320 864 -320
WIRE 1216 -320 1120 -320
WIRE 960 -240 800 -240
WIRE 1248 -240 1120 -240
WIRE 1376 -240 1376 -400
WIRE 1376 -240 1312 -240
WIRE 1664 -240 1664 -272
WIRE -64 -224 -64 -256
WIRE 448 -224 448 -400
WIRE 800 -224 800 -240
WIRE 448 -192 448 -224
WIRE 800 -192 800 -224
WIRE 400 -112 352 -112
WIRE 752 -112 704 -112
WIRE 448 -64 448 -96
WIRE 800 -64 800 -96
WIRE 112 128 64 128
WIRE 400 128 352 128
WIRE 64 160 64 128
WIRE 352 160 352 128
WIRE 64 272 64 240
WIRE 352 272 352 240
FLAG 112 128 sine
FLAG 64 272 0
FLAG 400 128 steps
FLAG 352 272 0
FLAG -16 -864 pwm1
FLAG -64 -720 0
FLAG -16 -672 pwm2
FLAG -64 -528 0
FLAG 448 -64 0
FLAG 800 -64 0
FLAG 352 -112 pwm1
FLAG 704 -112 pwm2
FLAG 1216 -320 0
FLAG 864 -320 in
FLAG 1664 -240 0
FLAG 1664 -400 out
FLAG -64 -224 0
FLAG -16 -368 in
FLAG 448 -224 ds1
FLAG 800 -224 ds2
SYMBOL voltage 64 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL file=sine.txt
SYMBOL voltage 352 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PWL file=steps.txt
SYMBOL voltage -64 -848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PWL REPEAT FOREVER VALUE_SCALE_FACTOR={Vgs} (file=pwm-1.txt)
SYMBOL voltage -64 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL REPEAT FOREVER VALUE_SCALE_FACTOR={Vgs} (file=pwm-2.txt)
SYMBOL ind2 944 -416 R0
SYMATTR InstName L1
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL ind2 1136 -416 M0
SYMATTR InstName L2
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL ind2 944 -336 R0
SYMATTR InstName L3
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL ind2 1136 -336 M0
SYMATTR InstName L4
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL nmos 400 -192 R0
SYMATTR InstName M1
SYMATTR Value IPT015N10N5
SYMBOL nmos 752 -192 R0
SYMATTR InstName M2
SYMATTR Value IPT015N10N5
SYMBOL diode 1248 -384 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value IdealDiode
SYMBOL diode 1248 -224 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value IdealDiode
SYMBOL res 1648 -368 R0
SYMATTR InstName R1
SYMATTR Value 100R
SYMBOL voltage -64 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 40V
SYMBOL ind 1456 -384 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value 1m
TEXT 32 296 Left 2 !.tran 20m
TEXT 960 -456 Left 2 !K1 L1 L2 L3 L4 1
TEXT -64 -456 Left 2 !.param Vgs=15V
TEXT 960 -528 Left 2 !.param Lp=1H
TEXT 960 -560 Left 2 !.param N=1
TEXT 960 -496 Left 2 !.param Ls=Lp*N**2
TEXT 1344 -624 Left 2 !.model IdealDiode D(Ron=1u Roff=1Meg Vfwd=0.1 Vrev=1Meg)
