Version 4
SHEET 1 3940 1956
WIRE -352 48 -464 48
WIRE -16 48 -32 48
WIRE 176 48 64 48
WIRE 400 48 304 48
WIRE 448 48 400 48
WIRE 1776 48 1728 48
WIRE 1904 48 1856 48
WIRE 2048 48 1904 48
WIRE 2208 48 2048 48
WIRE 2336 48 2208 48
WIRE 2528 48 2336 48
WIRE -464 64 -464 48
WIRE 1904 64 1904 48
WIRE 2048 64 2048 48
WIRE 2336 112 2336 48
WIRE 2208 128 2208 48
WIRE 176 144 128 144
WIRE 432 144 304 144
WIRE 448 144 448 128
WIRE 448 144 432 144
WIRE 128 160 128 144
WIRE -464 176 -464 144
WIRE 400 176 400 48
WIRE 400 176 304 176
WIRE 1904 176 1904 144
WIRE 1968 176 1904 176
WIRE 2048 176 2048 144
WIRE 2048 176 1968 176
WIRE 1904 208 1904 176
WIRE 432 272 432 144
WIRE 432 272 304 272
WIRE 1904 304 1904 288
WIRE 1904 304 1856 304
WIRE 2208 304 2208 192
WIRE 2208 304 1904 304
WIRE 2336 304 2336 192
WIRE 2336 304 2208 304
WIRE 2336 320 2336 304
WIRE 2528 320 2528 48
WIRE 1856 352 1856 304
WIRE -16 416 -32 416
WIRE 80 416 64 416
WIRE 176 416 80 416
WIRE 368 416 304 416
WIRE 2336 416 2336 400
WIRE 2528 416 2528 400
WIRE 176 512 16 512
WIRE 368 512 368 496
WIRE 368 512 304 512
WIRE 80 544 80 416
WIRE 176 544 80 544
WIRE 16 640 16 512
WIRE 176 640 16 640
WIRE 16 656 16 640
WIRE 0 1008 -48 1008
WIRE 128 1008 80 1008
WIRE 432 1008 352 1008
WIRE 128 1024 128 1008
WIRE 352 1024 352 1008
WIRE 432 1024 432 1008
WIRE 128 1120 128 1104
WIRE 128 1120 64 1120
WIRE 352 1120 352 1104
WIRE 432 1120 432 1104
WIRE 432 1120 352 1120
WIRE 64 1136 64 1120
WIRE 352 1136 352 1120
WIRE 0 1280 -48 1280
WIRE 128 1280 80 1280
WIRE 432 1280 352 1280
WIRE 128 1296 128 1280
WIRE 352 1296 352 1280
WIRE 432 1296 432 1280
WIRE 128 1392 128 1376
WIRE 128 1392 64 1392
WIRE 352 1392 352 1376
WIRE 432 1392 432 1376
WIRE 432 1392 352 1392
WIRE 64 1408 64 1392
WIRE 352 1408 352 1392
WIRE -48 1568 -96 1568
WIRE 80 1568 32 1568
WIRE 128 1568 80 1568
WIRE 400 1568 352 1568
WIRE 480 1568 400 1568
WIRE 128 1584 128 1568
WIRE 352 1584 352 1568
WIRE 480 1584 480 1568
WIRE 48 1680 -16 1680
WIRE 128 1680 128 1664
WIRE 128 1680 48 1680
WIRE 352 1680 352 1664
WIRE 432 1680 352 1680
WIRE 480 1680 480 1664
WIRE 480 1680 432 1680
WIRE -16 1696 -16 1680
WIRE 80 1728 80 1568
WIRE 128 1728 80 1728
WIRE 400 1728 400 1568
WIRE 400 1728 352 1728
WIRE 48 1744 48 1680
WIRE 128 1744 128 1728
WIRE 352 1744 352 1728
WIRE 432 1744 432 1680
WIRE 48 1840 48 1824
WIRE 128 1840 128 1824
WIRE 128 1840 48 1840
WIRE 352 1840 352 1824
WIRE 432 1840 432 1824
WIRE 432 1840 352 1840
WIRE 352 1856 352 1840
FLAG -464 176 0
FLAG 1968 176 4a
FLAG 2528 416 0
FLAG 2336 416 0
FLAG -352 48 V_test
FLAG 1856 352 0
FLAG 1728 48 V_test
FLAG -32 48 V_test
FLAG 128 160 0
FLAG -32 416 V_test
FLAG 352 1216 0
FLAG 64 1136 0
FLAG -48 1008 V_test
FLAG 352 1488 0
FLAG 64 1408 0
FLAG -48 1280 V_test
FLAG 16 656 0
FLAG -16 1696 0
FLAG -96 1568 V_test
FLAG 352 1936 0
SYMBOL voltage -464 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 1u 1n 1n {t_on} 10u)
SYMBOL res 2032 48 R0
SYMATTR InstName Rlkg
SYMATTR Value 26605.14
SYMBOL ind 1888 48 R0
SYMATTR InstName L_Lkg
SYMATTR Value 95ï¿½
SYMATTR SpiceLine Rser=0.01m
SYMBOL ind 1888 192 R0
SYMATTR InstName L_pri1
SYMATTR Value 405ï¿½
SYMATTR SpiceLine Rser=123m
SYMBOL cap 2192 128 R0
SYMATTR InstName Cpri1
SYMATTR Value 49.87p
SYMBOL res 2320 96 R0
SYMATTR InstName Rdmp1
SYMATTR Value 158320.56
SYMBOL res 2512 304 R0
SYMATTR InstName Rg3
SYMATTR Value 20Meg
SYMBOL res 2320 304 R0
SYMATTR InstName Rg7
SYMATTR Value 20Meg
SYMBOL res 1760 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 1n
SYMBOL 760895631 176 48 R0
SYMATTR InstName T1
SYMBOL res -32 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Pri
SYMATTR Value 1n
SYMBOL 760895631 304 416 M0
SYMATTR InstName T3
SYMBOL res -32 432 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Sec
SYMATTR Value 1n
SYMBOL ind2 112 1008 R0
SYMATTR InstName Lp1
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL ind2 368 1008 M0
SYMATTR InstName Ls1
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL res 336 1120 R0
SYMATTR InstName Rg6
SYMATTR Value 20Meg
SYMBOL res -16 1024 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Pri_Alt
SYMATTR Value 1n
SYMBOL res 416 1008 R0
SYMATTR InstName R3
SYMATTR Value {Rx}
SYMBOL ind2 112 1280 R0
SYMATTR InstName Ls2
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL ind2 368 1280 M0
SYMATTR InstName Lp2
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL res 336 1392 R0
SYMATTR InstName Rg1
SYMATTR Value 20Meg
SYMBOL res -16 1296 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Sec_Alt
SYMATTR Value 1n
SYMBOL res 416 1280 R0
SYMATTR InstName R6
SYMATTR Value {Rx}
SYMBOL res 432 32 R0
SYMATTR InstName R1
SYMATTR Value {Rx}
SYMBOL res 352 400 R0
SYMATTR InstName R8
SYMATTR Value {Rx}
SYMBOL ind2 112 1568 R0
SYMATTR InstName Ls3
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL ind2 368 1568 M0
SYMATTR InstName Lp3
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL res -64 1584 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Para
SYMATTR Value 1n
SYMBOL res 464 1568 R0
SYMATTR InstName R2
SYMATTR Value {Rx}
SYMBOL ind2 112 1728 R0
SYMATTR InstName Ls4
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL ind2 368 1728 M0
SYMATTR InstName Lp4
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL res 336 1840 R0
SYMATTR InstName Rg2
SYMATTR Value 20Meg
SYMBOL res 416 1728 R0
SYMATTR InstName R4
SYMATTR Value 1µ
SYMBOL res 64 1728 M0
SYMATTR InstName R7
SYMATTR Value 1µ
TEXT -496 296 Left 2 !.tran 5u
TEXT 1864 32 Left 2 ;4
TEXT 1864 272 Left 2 ;2
TEXT -480 -160 Left 2 ;Calculate inductance:\nL = V * t_on / I_L
TEXT 96 776 Left 2 !.param N = 35 / 2\n.param Lp = 500uH\n.param Lr = 95uH\n.param Ls = Lp / (N**2)\n.param Kf = sqrt(1 - (Lr / Lp))
TEXT 96 744 Left 2 ;https://www.analog.com/en/technical-articles/using-transformers-in-ltspice-switcher-cadiii.html
TEXT 152 1000 Left 2 !K1 Lp1 Ls1 {Kf}
TEXT -496 344 Left 2 !.step param Rx list 1n 100Meg
TEXT 152 1272 Left 2 !K2 Lp2 Ls2 {Kf}
TEXT 560 1000 Left 2 !.meas I_L_Pri_Alt MAX I(Pri_Alt) FROM 2.5u
TEXT 560 1024 Left 2 !.meas L_Pri_Alt MIN t_on / I(Pri_Alt) FROM 2.5u
TEXT 544 48 Left 2 !.meas I_L_Pri MAX I(Pri) FROM 2.5u
TEXT 544 72 Left 2 !.meas L_Pri MIN t_on / I(Pri) FROM 2.5u
TEXT 544 416 Left 2 !.meas I_L_Sec AVG I(Sec) FROM 2.5u
TEXT 544 440 Left 2 !.meas L_Sec AVG t_on / I(Sec) FROM 2.5u
TEXT -464 -320 Left 2 ;Datasheet:\nhttps://www.we-online.com/components/products/datasheet/760895631.pdf
TEXT 560 1280 Left 2 !.meas I_L_Sec_Alt MAX I(Sec_Alt) FROM 2.5u
TEXT 560 1304 Left 2 !.meas L_Sec_Alt MIN t_on / I(Sec_Alt) FROM 2.5u
TEXT 560 888 Left 2 !.meas I_Sec_Calc PARAM Ls
TEXT 152 1560 Left 2 !K3 Lp3 Ls3 {Kf}
TEXT 152 1720 Left 2 !K4 Lp4 Ls4 {Kf}
TEXT 560 1568 Left 2 !.meas L_Para MIN t_on / I(Para) FROM 2.5u
TEXT -496 320 Left 2 !.param t_on 1u
